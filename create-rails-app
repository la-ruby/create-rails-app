#!/usr/bin/env bash
set -Eeuo pipefail

set -x

init_db() {
  [ -d ~/.cra ] || mkdir ~/.cra
  [ -d ~/.cra/bin ] || mkdir ~/.cra/bin
}

verify_ruby_version() {
  ruby_version=$(RBENV_VERSION="2.7.0" ruby -v)
  echo $ruby_version | grep '2.7.0'
}
  
# GLOBALS
export CRA_ROOT="${HOME}/.cra"
export CRA_RAILS_BRANCH="6-0-stable"

# Some packages


init_db
verify_ruby_version
which rbenv || true
rbenv install 2.7.0
RBENV_VERSION="2.7.0" ruby -v


#git clone -b $CRA_RAILS_BRANCH --single-branch https://github.com/rails/rails ${CRA_ROOT}/rails
#(cd $CRA_ROOT/rails/ && ruby --version)

# PATH="$PATH:/Users/administrator/create-rails-app" create-rails-app; echo $?